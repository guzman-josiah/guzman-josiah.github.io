<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Install Gallery</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container { 
            background: white; 
            padding: 40px 30px; 
            border-radius: 20px; 
            max-width: 500px; 
            width: 100%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2); 
        }
        h1 { 
            font-size: 32px; 
            margin-bottom: 10px; 
            color: #333;
            text-align: center;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }
        .warning-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 25px;
            text-align: center;
        }
        .warning-box strong {
            color: #856404;
            font-size: 16px;
            display: block;
            margin-bottom: 5px;
        }
        .warning-box p {
            color: #856404;
            font-size: 14px;
            line-height: 1.5;
        }
        .browser-detect {
            background: #f8d7da;
            border: 2px solid #dc3545;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 25px;
            display: none;
        }
        .browser-detect p {
            color: #721c24;
            font-size: 14px;
            line-height: 1.6;
            margin: 0;
        }
        .steps { 
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            line-height: 1.8;
        }
        .steps-title {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 15px;
            color: #333;
        }
        .step {
            margin-bottom: 12px;
            padding-left: 25px;
            position: relative;
            color: #555;
        }
        .step:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #007aff;
            font-weight: bold;
        }
        .important {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .important strong {
            color: #856404;
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
        }
        .important p {
            color: #856404;
            margin: 0;
            font-size: 14px;
            line-height: 1.6;
        }
        .checkbox-container {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .checkbox-container:hover {
            background: #e8e8e8;
        }
        .checkbox-container input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            margin-top: 2px;
            flex-shrink: 0;
        }
        .checkbox-container label {
            cursor: pointer;
            line-height: 1.5;
            color: #333;
            font-size: 15px;
            user-select: none;
        }
        .btn { 
            background: #007aff; 
            color: white; 
            border: none; 
            padding: 16px 40px; 
            border-radius: 12px; 
            font-size: 18px; 
            font-weight: 600;
            text-decoration: none; 
            display: block;
            width: 100%;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0,122,255,0.3);
        }
        .btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,122,255,0.4);
        }
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .btn:disabled:hover {
            background: #ccc;
            transform: none;
        }
        .emoji {
            font-size: 48px;
            margin-bottom: 20px;
            text-align: center;
        }
        .help-btn {
            background: #34c759;
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: all 0.3s;
        }
        .help-btn:hover {
            background: #28a745;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal.active {
            display: flex;
        }
        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .modal-header {
            padding: 30px 30px 20px;
            border-bottom: 2px solid #f0f0f0;
            flex-shrink: 0;
        }
        .modal-header h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }
        .modal-body {
            padding: 30px;
            overflow-y: auto;
            flex: 1;
        }
        .visual-step {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        .visual-step.active {
            border-color: #007aff;
            background: #f0f8ff;
            box-shadow: 0 4px 20px rgba(0,122,255,0.2);
            transform: scale(1.02);
        }
        .step-number {
            display: inline-block;
            width: 36px;
            height: 36px;
            background: #e0e0e0;
            color: #666;
            border-radius: 50%;
            text-align: center;
            line-height: 36px;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }
        .visual-step.active .step-number {
            background: #007aff;
            color: white;
        }
        .step-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #333;
        }
        .step-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .step-image {
            width: 100%;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
            margin: 15px 0;
        }
        .share-button-demo {
            background: #f8f9fa;
            border: 3px dashed #007aff;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
        }
        .share-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        .share-button-demo p {
            color: #007aff;
            font-weight: 600;
            margin: 5px 0;
        }
        .share-button-demo small {
            color: #666;
            display: block;
            margin-top: 10px;
        }
        .nav-buttons {
            position: relative;
            display: flex;
            gap: 15px;
            padding: 20px 30px;
            background: white;
            border-top: 2px solid #f0f0f0;
            box-shadow: 0 -4px 12px rgba(0,0,0,0.05);
            flex-shrink: 0;
        }
        .nav-btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .nav-btn.prev {
            background: #f0f0f0;
            color: #333;
        }
        .nav-btn.next {
            background: #007aff;
            color: white;
        }
        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .nav-btn:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #f0f0f0;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .close-btn:hover {
            background: #e0e0e0;
        }
        .progress-bar {
            height: 6px;
            background: #f0f0f0;
            border-radius: 3px;
            margin-bottom: 20px;
        }
        .progress-fill {
            height: 100%;
            background: #007aff;
            border-radius: 3px;
            transition: width 0.3s;
        }
        .tip-box {
            background: #fff9e6;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        .tip-box strong {
            color: #856404;
            display: block;
            margin-bottom: 5px;
        }
        .tip-box p {
            color: #856404;
            margin: 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="emoji">üì∏</div>
        <h1>Gallery App</h1>
        <p class="subtitle">Beautiful image organization for iPhone</p>
        
        <div class="browser-detect" id="browserWarning">
            <p><strong>‚ö†Ô∏è Wrong Browser Detected</strong><br>
            This app must be opened in <strong>Safari</strong>. Please copy this link and open it in Safari to continue.</p>
        </div>

        <div class="warning-box">
            <strong>‚ö†Ô∏è Important</strong>
            <p>This app ONLY works in Safari browser. If you're using Chrome, Firefox, or another browser, please open this page in Safari first.</p>
        </div>

        <div class="important">
            <strong>üìã STEP 1: Read the Visual Guide First</strong>
            <p>Before clicking anything else, tap the <strong>GREEN button below</strong> to open the step-by-step visual guide. Read through ALL 6 steps carefully - this is just for reading and understanding. You won't do any actions while the guide is open.</p>
        </div>

        <button class="help-btn" onclick="openGuide()">üìñ Step-by-Step Visual Guide (START HERE)</button>

        <div class="important" style="margin-top: 25px;">
            <strong>üìã STEP 2: Confirm You've Read Everything</strong>
            <p>After you've finished reading the entire visual guide, check the box below to confirm you understand all the steps.</p>
        </div>

        <div class="checkbox-container" id="checkboxContainer">
            <input type="checkbox" id="confirmRead" disabled>
            <label for="confirmRead">I have read the complete visual guide and understand all 6 steps</label>
        </div>

        <div class="important" style="margin-top: 15px;">
            <strong>üìã STEP 3: Open the Gallery</strong>
            <p>Once you've checked the box above, click the blue "Open Gallery" button below. <strong>After</strong> the Gallery opens, that's when you'll follow the steps you learned in the guide (tap Share button, etc.)</p>
        </div>

        <button class="btn" id="openBtn" disabled onclick="openGallery()">Open Gallery</button>
    </div>

    <div class="modal" id="guideModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeGuide()">‚úï</button>
            <div class="modal-header">
                <h2>Step-by-Step Installation Guide</h2>
                <p style="color: #666; font-size: 14px; margin-top: 10px;">üìñ Read all steps carefully - Do NOT perform any actions while reading this guide!</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 16.67%"></div>
                </div>
            </div>
            <div class="modal-body">
                <div class="visual-step active" id="step1">
                    <div class="step-number">1</div>
                    <div class="step-title">Close This Guide & Click "Open Gallery"</div>
                    <div class="step-description">
                        After you finish reading all 6 steps in this guide, you'll close this guide and return to the main page. Then you'll click the blue "Open Gallery" button. The Gallery app will load in Safari.
                    </div>
                    <div class="tip-box">
                        <strong>‚ö†Ô∏è Important:</strong>
                        <p>Don't do this step yet! Just read and understand. You'll do all these actions AFTER you finish reading this entire guide.</p>
                    </div>
                </div>

                <div class="visual-step" id="step2">
                    <div class="step-number">2</div>
                    <div class="step-title">Find the Share Button (After Gallery Opens)</div>
                    <div class="step-description">
                        After the Gallery opens on your screen, look at the <strong>bottom</strong> of your Safari browser. You'll see a row of buttons.
                    </div>
                    <div class="share-button-demo">
                        <div class="share-icon">‚éô</div>
                        <p>Tap this Share button</p>
                        <small>It looks like a box with an arrow pointing up</small>
                    </div>
                    <div class="tip-box">
                        <strong>üí° Where is it?</strong>
                        <p>The Share button (‚éô) is at the <strong>bottom center</strong> of Safari, between the back/forward arrows and the tabs button. It's the middle button in the toolbar.</p>
                    </div>
                </div>

                <div class="visual-step" id="step3">
                    <div class="step-number">3</div>
                    <div class="step-title">Tap "Add to Home Screen"</div>
                    <div class="step-description">
                        A menu will slide up from the bottom. <strong>Scroll down</strong> in this menu until you see "Add to Home Screen". Tap it.
                    </div>
                    <div class="tip-box">
                        <strong>üí° Can't find it?</strong>
                        <p>The "Add to Home Screen" option is usually near the middle of the share menu. Keep scrolling down if you don't see it right away. It has a plus (+) icon next to it.</p>
                    </div>
                </div>

                <div class="visual-step" id="step4">
                    <div class="step-number">4</div>
                    <div class="step-title">Confirm Installation</div>
                    <div class="step-description">
                        A preview screen will appear showing the app icon and name "Gallery". Tap the blue "Add" button in the <strong>top-right corner</strong>.
                    </div>
                    <div class="tip-box">
                        <strong>üí° Almost done!</strong>
                        <p>After tapping "Add", Safari will close and you'll see your home screen.</p>
                    </div>
                </div>

                <div class="visual-step" id="step5">
                    <div class="step-number">5</div>
                    <div class="step-title">Find Your App</div>
                    <div class="step-description">
                        Look at your iPhone home screen. You'll see a new icon with a üì∏ camera emoji. This is your Gallery app!
                    </div>
                    <div class="tip-box">
                        <strong>üí° Success!</strong>
                        <p>Tap the Gallery icon whenever you want to use the app. It works just like any other app on your phone!</p>
                    </div>
                </div>

                <div class="visual-step" id="step6">
                    <div class="step-number">6</div>
                    <div class="step-title">You're Done Reading! üéâ</div>
                    <div class="step-description">
                        You've now read all the steps! Remember: you haven't actually done anything yet - you've just learned what to do. Now close this guide and follow the 3 steps on the main page.
                    </div>
                    <div class="tip-box">
                        <strong>‚úÖ What to do next:</strong>
                        <p><strong>1.</strong> Close this guide<br>
                        <strong>2.</strong> Check the confirmation box on the main page<br>
                        <strong>3.</strong> Click "Open Gallery"<br>
                        <strong>4.</strong> THEN perform all the steps you just learned!</p>
                    </div>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn prev" id="prevBtn" onclick="prevStep()" disabled>‚Üê Previous</button>
                <button class="nav-btn next" id="nextBtn" onclick="nextStep()">Next ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;

        // Detect if NOT Safari
        function isSafari() {
            const ua = navigator.userAgent;
            const isIOS = /iPad|iPhone|iPod/.test(ua);
            const isWebkit = /WebKit/.test(ua);
            const isChrome = /CriOS/.test(ua);
            const isFirefox = /FxiOS/.test(ua);
            const isSafariUA = /Safari/.test(ua);
            
            return isIOS && isWebkit && !isChrome && !isFirefox && isSafariUA;
        }

        // Show warning if not Safari
        if (!isSafari()) {
            document.getElementById('browserWarning').style.display = 'block';
        }

        function toggleCheckbox() {
            const checkbox = document.getElementById('confirmRead');
            if (!checkbox.disabled) {
                checkbox.checked = !checkbox.checked;
                checkButton();
            }
        }

        function checkButton() {
            const checkbox = document.getElementById('confirmRead');
            const button = document.getElementById('openBtn');
            button.disabled = !checkbox.checked;
        }

        // Set up checkbox container click handler
        document.getElementById('checkboxContainer').addEventListener('click', function(e) {
            // Only toggle if clicking the container or label, not the checkbox itself
            if (e.target.tagName !== 'INPUT') {
                toggleCheckbox();
            }
        });

        // Set up checkbox change handler
        document.getElementById('confirmRead').addEventListener('change', function() {
            checkButton();
        });

        function openGallery() {
            if (!isSafari()) {
                alert('‚ö†Ô∏è Please open this page in Safari browser!\n\nThis app will not work properly in other browsers. Copy this link and paste it into Safari.');
                return;
            }
            window.location.href = 'gallery.html';
        }

        function openGuide() {
            document.getElementById('guideModal').classList.add('active');
            document.getElementById('confirmRead').disabled = false;
            updateStepDisplay();
        }

        function closeGuide() {
            document.getElementById('guideModal').classList.remove('active');
            currentStep = 1;
            updateStepDisplay();
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                updateStepDisplay();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        }

        function updateStepDisplay() {
            // Update all steps
            for (let i = 1; i <= totalSteps; i++) {
                const step = document.getElementById('step' + i);
                if (i === currentStep) {
                    step.classList.add('active');
                    step.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                } else {
                    step.classList.remove('active');
                }
            }

            // Update buttons
            document.getElementById('prevBtn').disabled = currentStep === 1;
            const nextBtn = document.getElementById('nextBtn');
            if (currentStep === totalSteps) {
                nextBtn.textContent = 'Done Reading - Close Guide ‚úì';
                nextBtn.onclick = closeGuide;
            } else {
                nextBtn.textContent = 'Next Step ‚Üí';
                nextBtn.onclick = nextStep;
            }

            // Update progress bar
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // Prevent accidental form submission
        document.getElementById('confirmRead').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                toggleCheckbox();
            }
        });

        // Close modal on background click
        document.getElementById('guideModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeGuide();
            }
        });
    </script>
</body>
</html>